<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Песочные бои</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="" />
    <script type="module" src="./data.js"></script>
  </head>
  <body>
    <header></header>
    <main>
      <div class="main-registration" id="main-registration">
        <div>
          <h1><span>Create Your Character</span></h1>
        </div>
        <div class="input-registration">
          <label class="textlabel">Character Name</label>
          <input
            type="text"
            class="registration"
            id="character"
            placeholder=""
          />
        </div>
        <div>
          <button type="button" class="button-submit" id="submit_character">
            Create Character
          </button>
        </div>
      </div>
    </main>
    <footer></footer>

    <script type="module">
      document.addEventListener("DOMContentLoaded", () => {
        const input = document.getElementById("character");
        const submit = document.getElementById("submit_character");

        submit.addEventListener("click", () => {
          const avatar = window.appData.avatar;
          const enemy_avatar = window.appData.enemy_avatar;
          const player = [
            {
              name: "",
              id: 0,
              wins: 0,
              loses: 0,
            },
          ];
          const enemy = [
            {
              name: "",
              id: 0,
              wins: 0,
              loses: 0,
            },
          ];

          player.name = input.value;
          player.avatar = avatar[Math.floor(Math.random() * avatar.length)];

          localStorage.setItem("Player/name", player.name);
          localStorage.setItem("Player/avatar", JSON.stringify(player.avatar));
          localStorage.setItem("Player/wins", player.avatar.win);
          localStorage.setItem(
            "Player/loses",
            JSON.stringify(player.avatar.loses)
          );

          enemy.avatar =
            enemy_avatar[Math.floor(Math.random() * enemy_avatar.length)];
          enemy.name = enemy.avatar.alt;
          localStorage.setItem("Enemy/name", enemy.name);
          localStorage.setItem("Enemy/avatar", JSON.stringify(enemy.avatar));
          localStorage.setItem("Enemy/wins", JSON.stringify(enemy.avatar.wins));
          localStorage.setItem(
            "Enemy/loses",
            JSON.stringify(enemy.avatar.loses)
          );
          window.location.href = "fight.html";
        });
      });

      const input = document.querySelector("input");
      const button = document.querySelector(".button-submit");

      input.addEventListener("input", () => {
        if (input.value.trim() !== "") {
          button.classList.add("enabled");
        } else {
          button.classList.remove("enabled");
        }
      });
    </script>
  </body>
</html>
